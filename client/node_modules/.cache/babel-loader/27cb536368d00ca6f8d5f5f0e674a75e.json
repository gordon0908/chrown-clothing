{"ast":null,"code":"import { firestore, convertCollectionsSnapshotToMap } from '../../../firebase/firebase.util';\nimport { takeEvery, call, put, all } from 'redux-saga/effects';\nimport { fetchShopSuccess, fetchShopFailed } from './shop-action';\nimport { FETCH_SHOP_START, FETCH_SHOP_SUCCESS, FETCH_SHOP_FAILED } from './type';\n\nfunction* sagasStartToProgress() {\n  // yield console.log('sagasStartToProgress')\n  const collectionRef = firestore.collection('collections');\n\n  try {\n    const collectionData = yield collectionRef.get();\n    const collections = yield call(convertCollectionsSnapshotToMap, collectionData);\n    yield put(fetchShopSuccess(collections));\n  } catch (e) {\n    yield put(fetchShopFailed(e.message));\n  }\n}\n\n;\nexport function* sagasStart() {\n  yield takeEvery(FETCH_SHOP_START, sagasStartToProgress);\n}\nexport function* shopSaga() {\n  yield all([call(sagasStart)]);\n}","map":{"version":3,"sources":["/Users/gordon/mywork/mytraining/2020-v1/complete-react-developer-in-2020-fromPaul/crown-app/src/components/redux/shop/shop-sagas.js"],"names":["firestore","convertCollectionsSnapshotToMap","takeEvery","call","put","all","fetchShopSuccess","fetchShopFailed","FETCH_SHOP_START","FETCH_SHOP_SUCCESS","FETCH_SHOP_FAILED","sagasStartToProgress","collectionRef","collection","collectionData","get","collections","e","message","sagasStart","shopSaga"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,+BAApB,QAA2D,iCAA3D;AACA,SAASC,SAAT,EAAoBC,IAApB,EAA0BC,GAA1B,EAA+BC,GAA/B,QAA0C,oBAA1C;AAEA,SAASC,gBAAT,EAA2BC,eAA3B,QAAiD,eAAjD;AACA,SAASC,gBAAT,EAA2BC,kBAA3B,EAA+CC,iBAA/C,QAAwE,QAAxE;;AAEA,UAAUC,oBAAV,GAAiC;AAC7B;AAEA,QAAMC,aAAa,GAAGZ,SAAS,CAACa,UAAV,CAAqB,aAArB,CAAtB;;AACA,MAAI;AAEA,UAAMC,cAAc,GAAG,MAAMF,aAAa,CAACG,GAAd,EAA7B;AAEA,UAAMC,WAAW,GAAG,MAAMb,IAAI,CAACF,+BAAD,EAAkCa,cAAlC,CAA9B;AAEA,UAAMV,GAAG,CAACE,gBAAgB,CAACU,WAAD,CAAjB,CAAT;AACH,GAPD,CAOC,OAAMC,CAAN,EAAS;AACN,UAAMb,GAAG,CAACG,eAAe,CAACU,CAAC,CAACC,OAAH,CAAhB,CAAT;AACH;AACJ;;AAAA;AAED,OAAO,UAAUC,UAAV,GAAuB;AAC1B,QAAMjB,SAAS,CAACM,gBAAD,EAAmBG,oBAAnB,CAAf;AACH;AAED,OAAO,UAAUS,QAAV,GAAqB;AACxB,QAAMf,GAAG,CAAC,CAACF,IAAI,CAACgB,UAAD,CAAL,CAAD,CAAT;AACH","sourcesContent":["import { firestore, convertCollectionsSnapshotToMap } from '../../../firebase/firebase.util';\nimport { takeEvery, call, put, all } from 'redux-saga/effects';\n\nimport { fetchShopSuccess, fetchShopFailed} from './shop-action';\nimport { FETCH_SHOP_START, FETCH_SHOP_SUCCESS, FETCH_SHOP_FAILED } from './type';\n\nfunction* sagasStartToProgress() {\n    // yield console.log('sagasStartToProgress')\n\n    const collectionRef = firestore.collection('collections');\n    try {\n\n        const collectionData = yield collectionRef.get();\n\n        const collections = yield call(convertCollectionsSnapshotToMap, collectionData);\n\n        yield put(fetchShopSuccess(collections));\n    }catch(e) {\n        yield put(fetchShopFailed(e.message));\n    }\n};\n\nexport function* sagasStart() {\n    yield takeEvery(FETCH_SHOP_START, sagasStartToProgress);\n}\n\nexport function* shopSaga() {\n    yield all([call(sagasStart)])\n}"]},"metadata":{},"sourceType":"module"}